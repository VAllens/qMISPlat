/** 
 * Kendo UI v2017.1.223 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2017 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("kendo.upload.min",["kendo.core.min"],e)}(function(){return function(e,t){function a(t){return e.map(n(t),function(e){return e.name}).join(", ")}function n(e){var t=e[0];return t.files?o(t.files):[{name:r(t.value),extension:i(t.value),size:null}]}function o(t){return e.map(t,function(e){return s(e)})}function s(e){var t=e.name||e.fileName;return{name:U.htmlEncode(t),extension:i(t),size:"number"==typeof e.size?e.size:e.fileSize,rawFile:e}}function i(e){var t=e.match(x);return t?t[0]:""}function r(e){var t=e.lastIndexOf("\\");return t!=-1?e.substr(t+1):e}function l(t,a){var n=U.guid();return e.map(t,function(e){return e.uid=a?U.guid():n,e})}function p(e,t){var a,n=d(t.allowedExtensions),o=t.maxFileSize,s=t.minFileSize;for(a=0;a<e.length;a++)u(e[a],n),c(e[a],s,o)}function d(t){var a=e.map(t,function(e){var t="."===e.substring(0,1)?e:"."+e;return t.toLowerCase()});return a}function u(t,a){a.length>0&&a.indexOf(t.extension.toLowerCase())<0&&(t.validationErrors=t.validationErrors||[],e.inArray(O,t.validationErrors)===-1&&t.validationErrors.push(O))}function c(t,a,n){0!==a&&t.size<a&&(t.validationErrors=t.validationErrors||[],e.inArray(L,t.validationErrors)===-1&&t.validationErrors.push(L)),0!==n&&t.size>n&&(t.validationErrors=t.validationErrors||[],e.inArray(M,t.validationErrors)===-1&&t.validationErrors.push(M))}function f(e){var t,a=0;if("number"!=typeof e[0].size)return"";for(t=0;t<e.length;t++)e[t].size&&(a+=e[t].size);return a/=1024,a<1024?a.toFixed(2)+" KB":(a/1024).toFixed(2)+" MB"}function m(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function h(a,n,o,s){var i,r;return n._supportsRemove()?(i=a.data("fileNames"),r=e.map(i,function(e){return e.name}),s===!1?(n._removeFileEntry(a),t):(n._submitRemove(r,o,function(e,t,o){var s=n.trigger(R,{operation:"remove",files:i,response:e,XMLHttpRequest:o});s||n._removeFileEntry(a)},function(e){m(n)&&n._removeFileEntry(a),n.trigger(N,{operation:"remove",files:i,XMLHttpRequest:e}),b("Server response: "+e.responseText)}),t)):(!m(n)&&s||n._removeFileEntry(a),t)}function v(t,a,n){var o=!1,s="";try{s=e.parseJSON(g(t)),o=!0}catch(i){n()}o&&a(s)}function g(e){return t!==e&&""!==e||(e="{}"),e}function k(e){e.stopPropagation(),e.preventDefault()}function _(e,t,a,n){var o,s;e.on("dragenter"+t,function(e){a(e),s=new Date,o||(o=setInterval(function(){var e=new Date-s;e>100&&(n(),clearInterval(o),o=null)},100))}).on("dragover"+t,function(){s=new Date})}function w(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function F(t){return e(t.target).closest(".k-file")}var y,C,U=window.kendo,S=U.ui.Widget,E=U.antiForgeryTokens,b=U.logToConsole,x=/\.([^\.]+)$/,z=".kendoUpload",D="select",A="upload",R="success",N="error",I="complete",T="cancel",q="clear",H="progress",B="remove",P="validationErrors",M="invalidMaxFileSize",L="invalidMinFileSize",O="invalidFileExtension",V=1e3,X=2e3,Z={loading:"k-i-loading",warning:"k-i-warning",success:"k-i-check"},j=S.extend({init:function(t,a){var n,o,s,i=this;S.fn.init.call(i,t,a),i.name=t.name,i.multiple=i.options.multiple,i.localization=i.options.localization,n=i.element,i.wrapper=n.closest(".k-upload"),0===i.wrapper.length&&(i.wrapper=i._wrapInput(n)),i._activeInput(n),i.toggle(i.options.enabled),o=i._ns=z+"-"+U.guid(),n.closest("form").on("submit"+o,e.proxy(i._onParentFormSubmit,i)).on("reset"+o,e.proxy(i._onParentFormReset,i)),i.options.async.saveUrl?(i._module=i._supportsFormData()?new C(i):new y(i),i._async=!0,s=i.options.files,s.length>0&&i._renderInitialFiles(s)):i._module=new W(i),i._supportsDrop()&&(""!==i.options.dropZone?i._setupCustomDropZone():i._setupDropZone()),i.wrapper.on("click",".k-upload-action",e.proxy(i._onFileAction,i)).on("click",".k-clear-selected",e.proxy(i._onClearSelected,i)).on("click",".k-upload-selected",e.proxy(i._onUploadSelected,i)),i.element.val()&&i._onInputChange({target:i.element})},events:[D,A,R,N,I,T,q,H,B],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0,accept:"*/*; q=0.5, application/json"},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",clearSelectedFiles:"Clear",uploadSelectedFiles:"Upload",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done",invalidMaxFileSize:"File size too large.",invalidMinFileSize:"File size too small.",invalidFileExtension:"File type not allowed."},validation:{allowedExtensions:[],maxFileSize:0,minFileSize:0},dropZone:""},setOptions:function(e){var t=this,a=t.element;S.fn.setOptions.call(t,e),t.multiple=t.options.multiple,a.attr("multiple",!!t._supportsMultiple()&&t.multiple),t.toggle(t.options.enabled)},enable:function(e){e=t===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},focus:function(){this.element.focus()},destroy:function(){var t=this,a=e(t.options.dropZone);e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),a.length>0&&a.off(t._ns),e(t.element).off(z),S.fn.destroy.call(t)},upload:function(){var e=this;e._module.onSaveSelected()},getFiles:function(){var t,a,n,o=this,s=[],i=o.wrapper.find(".k-file");for(a=0;a<i.length;a++)if(t=e(i[a]).data("fileNames"))for(n=0;n<t.length;n++)s.push(t[n]);return s},clearAllFiles:function(){var e=this,t=e.wrapper.find(".k-file");t.each(function(t,a){e._removeFileByDomElement(a,!1)})},removeAllFiles:function(){var e=this,t=e.wrapper.find(".k-file");t.each(function(t,a){e._removeFileByDomElement(a,!0)})},removeFileByUid:function(e){this._removeFileByUid(e,!0)},clearFileByUid:function(e){this._removeFileByUid(e,!1)},_removeFileByUid:function(t,a){var n,o=this;"string"==typeof t&&(n=e(".k-file["+U.attr("uid")+'="'+t+'"]',o.wrapper),n.length>0&&o._removeFileByDomElement(n,a))},clearFile:function(e){this._removeFile(e,!1)},removeFile:function(e){this._removeFile(e,!0)},_removeFile:function(t,a){var n,o=this,s=o.wrapper.find(".k-file");"function"==typeof t&&s.each(function(s,i){n=e(i).data("fileNames"),t(n)&&o._removeFileByDomElement(i,a)})},_removeFileByDomElement:function(t,a){var n,o=this,s={target:e(t,o.wrapper)};o.options.async.saveUrl?(e(t).hasClass("k-file-progress")?o._module.onCancel(s):o._module.onRemove(s,{},a),n=e(".k-file",o.wrapper),0===n.length?o._hideHeaderUploadstatus():o._updateHeaderUploadStatus()):o._module.onRemove(s,{},a)},_addInput:function(t){if(t[0].nodeType){var a=this,n=t.clone().val("");n.insertAfter(a.element).data("kendoUpload",a),e(a.element).hide().attr("tabindex","-1").removeAttr("id").off(z),a._activeInput(n),a.element.focus()}},_activeInput:function(t){var a=this,n=a.wrapper;a.element=t,t.attr("multiple",!!a._supportsMultiple()&&a.multiple).attr("autocomplete","off").on("click"+z,function(e){n.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+z,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+z,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+z,e.proxy(a._onInputChange,a)).on("keydown"+z,e.proxy(a._onInputKeyDown,a))},_onInputKeyDown:function(e){var t=this,a=t.wrapper.find(".k-upload-action:visible:first");e.keyCode===U.keys.TAB&&a.length>0&&(e.preventDefault(),a.focus())},_onInputChange:function(t){var a,n=this,o=e(t.target),s=l(n._inputFiles(o),n._isAsyncNonBatch());p(s,n.options.validation),a=n.trigger(D,{files:s}),a?(n._addInput(o),o.remove()):n._module.onSelect({target:o},s)},_onDrop:function(t){var a,n=t.originalEvent.dataTransfer,s=this,i=n.files,r=l(o(i),s._isAsyncNonBatch());k(t),i.length>0&&!s.wrapper.hasClass("k-state-disabled")&&(!s.multiple&&r.length>1&&r.splice(1,r.length-1),p(r,s.options.validation),a=s.trigger(D,{files:r}),a||s._module.onSelect({target:e(".k-dropzone",s.wrapper)},r))},_filesContainValidationErrors:function(t){var a=!1;return e(t).each(function(e,t){if(t[P]&&t[P].length>0)return a=!0,!1}),a},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var a,n,o=this,s=0;for(t=l(t,!0),s=0;s<t.length;s++)a=t[s],n=o._enqueueFile(a.name,{fileNames:[a]}),n.addClass("k-file-success").data("files",[t[s]]),o.options.template||e(".k-upload-status",n).prepend("<span class='k-upload-pct'>100%</span>"),o._supportsRemove()&&o._fileAction(n,B)},_prepareTemplateData:function(e,t){var a=t.fileNames,n={},o=0,s=0;for(s=0;s<a.length;s++)o+=a[s].size;return n.name=e,n.size=o,n.files=t.fileNames,n},_prepareDefaultSingleFileEntryTemplate:function(t){var a=this,n=t.fileNames[0],o=f(t.fileNames),s=n[P],i="";return i+=s&&s.length>0?"<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-file-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name k-file-name-invalid' title='"+n.name+"'>"+n.name+"</span><span class='k-file-validation-message'>"+a.localization[s[0]]+"</span></span>":"<li class='k-file'><span class='k-progress'></span><span class='k-file-extension-wrapper'><span class='k-file-extension'>"+n.extension.substring(1)+"</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name' title='"+n.name+"'>"+n.name+"</span><span class='k-file-size'>"+o+"</span></span>",i+="<strong class='k-upload-status'></strong>",e(i)},_prepareDefaultMultipleFileEntriesTemplate:function(t){var a,n,o=this,s=t.fileNames,i=o._filesContainValidationErrors(s),r=f(s),l="";for(l+=i?"<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-multiple-files-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span>":"<li class='k-file'><span class='k-progress'></span><span class='k-multiple-files-extension-wrapper'>",l+="<span class='k-file-state'></span></span>",s.sort(function(e,t){return e[P]?-1:t[P]?1:0}),l+="<span class='k-file-name-size-wrapper'>",a=0;a<s.length;a++)n=s[a],l+=n[P]&&n[P].length>0?"<span class='k-file-name k-file-name-invalid' title='"+n.name+"'>"+n.name+"</span>":"<span class='k-file-name' title='"+n.name+"'>"+n.name+"</span>";return l+=i?"<span class='k-file-validation-message'>Invalid file(s). Please check file upload requirements.</span>":"<span class='k-file-information'>Total: "+s.length+" files, "+r+"</span>",l+="</span><strong class='k-upload-status'></strong>",e(l)},_enqueueFile:function(t,a){var n,o,s,i,r=this,l=a.fileNames[0].uid,p=e(".k-upload-files",r.wrapper),d=r.options,u=d.template;return 0===p.length&&(p=e("<ul class='k-upload-files k-reset'></ul>").appendTo(r.wrapper),r.options.showFileList||p.hide(),r.wrapper.removeClass("k-upload-empty")),n=e(".k-file",p),u?(s=r._prepareTemplateData(t,a),u=U.template(u),o=e("<li class='k-file'>"+u(s)+"</li>"),o.find(".k-upload-action").addClass("k-button"),r.angular("compile",function(){return{elements:o,data:[s]}})):o=1===a.fileNames.length?r._prepareDefaultSingleFileEntryTemplate(a):r._prepareDefaultMultipleFileEntriesTemplate(a),o.attr(U.attr("uid"),l).appendTo(p).data(a),r._async||e(".k-progress",o).width("100%"),!r.multiple&&n.length>0&&(i={files:n.data("fileNames"),headers:{}},r.trigger(B,i)||r._module.onRemove({target:e(n,r.wrapper)},i)),o},_removeFileEntry:function(t){var a,n,o,s=this,i=t.closest(".k-upload-files");t.remove(),a=e(".k-file",i),n=e(".k-file-success, .k-file-error",i),o=e(".k-file-invalid",i),n.length!==a.length&&o.length!==a.length||this._hideUploadButton(),0===a.length?(i.remove(),s.wrapper.addClass("k-upload-empty"),s._hideHeaderUploadstatus()):s._updateHeaderUploadStatus()},_fileAction:function(e,t){var a={remove:"k-i-x",cancel:"k-i-cancel",retry:"k-i-retry"},n={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-reload"};a.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button").append("<span class='k-icon "+n[t]+" "+a[t]+"' title='"+this.localization[t]+"'aria-label='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(a[t],this.localization[t],n[t]))))},_fileState:function(t,a){var n=this.localization,o={uploading:{text:n.statusUploading},uploaded:{text:n.statusUploaded},failed:{text:n.statusFailed}},s=o[a];s&&e("span.k-file-state",t).text(s.text)},_renderAction:function(t,a,n){return""!==t?e("<button type='button' class='k-button k-upload-action'><span class='k-icon "+n+" "+t+"' title='"+a+"' aria-label='"+a+"'></span></button>").on("focus",function(){e(this).addClass("k-state-focused")}).on("blur",function(){e(this).removeClass("k-state-focused")}):e("<button type='button' class='k-button'>"+a+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var a,n,o,s,i,r,l=this;return l.wrapper.hasClass("k-state-disabled")||(a=e(t.target).closest(".k-upload-action"),n=a.find(".k-icon"),o=a.closest(".k-file"),s=o.data("fileNames"),i=l._filesContainValidationErrors(s),r={files:s,headers:{}},n.hasClass("k-i-x")?l.trigger(B,r)||l._module.onRemove({target:e(o,l.wrapper)},r,!i):n.hasClass("k-i-cancel")?(l.trigger(T,r),l._module.onCancel({target:e(o,l.wrapper)}),l._checkAllComplete(),l._updateHeaderUploadStatus()):n.hasClass("k-i-retry")&&(e(".k-i-warning",o).remove(),e(".k-progress",o).finish().show(),l._module.onRetry({target:e(o,l.wrapper)}))),!1},_onUploadSelected:function(){var e=this,t=e.wrapper;return t.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onClearSelected:function(){var e=this,t=e.wrapper,a={};return t.hasClass("k-state-disabled")||e.trigger(q,a)||e.clearAllFiles(),!1},_onFileProgress:function(t,a){var n;a>100&&(a=100),this.options.template?e(".k-progress",t.target).width(a+"%"):(n=e(".k-upload-pct",t.target),0===n.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(a+"%"),e(".k-progress",t.target).width(a+"%")),this.trigger(H,{files:F(t).data("fileNames"),percentComplete:a})},_onUploadSuccess:function(e,t,a){var n=this,o=F(e),s=n.trigger(R,{files:o.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:a});s?n._setUploadErrorState(o):(n._fileState(o,"uploaded"),o.removeClass("k-file-progress").addClass("k-file-success"),n._updateHeaderUploadStatus(),n._supportsRemove()?n._fileAction(o,B):n._clearFileAction(o)),n._hideUploadProgress(o),n._checkAllComplete()},_onUploadError:function(e,t){var a=this,n=F(e);a._setUploadErrorState(n),a.trigger(N,{operation:"upload",files:n.data("fileNames"),XMLHttpRequest:t}),b("Server response: "+t.responseText),a._hideUploadProgress(n),a._checkAllComplete()},_setUploadErrorState:function(t){var a=this,n=e(".k-upload-pct",t);a._fileState(t,"failed"),t.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",t).width("100%"),n.length>0?n.empty().removeClass("k-upload-pct").addClass("k-icon k-i-warning"):e(".k-upload-status",t).prepend("<span class='k-icon k-i-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(t,"retry")},_hideUploadProgress:function(t){e(".k-progress",t).delay(V).fadeOut(X,function(){e(this).css("width","0%")})},_showUploadButton:function(){var t=this,a=e(".k-upload-selected",t.wrapper),n=e(".k-clear-selected",t.wrapper);0===a.length&&(a=t._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected"),n=t._renderAction("",this.localization.clearSelectedFiles).addClass("k-clear-selected")),this.wrapper.append(n,a)},_hideUploadButton:function(){e(".k-upload-selected, .k-clear-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(t){var a=this,n=a.localization,o=e(".k-dropzone",a.wrapper),s=e(".k-upload-status-total",a.wrapper);0!==s.length&&s.remove(),s='<strong class="k-upload-status k-upload-status-total"><span class="k-icon"></span></strong>',t?(s=e(s).append(n.headerStatusUploading),s.find(".k-icon").addClass(Z.loading)):(s=e(s).append(n.headerStatusUploaded),s.find(".k-icon").addClass(Z.warning)),o.length>0?o.append(s):e(".k-upload-button",a.wrapper).after(s)},_updateHeaderUploadStatus:function(){var t,a,n=this,o=e(".k-upload-status-total",this.wrapper),s=e(".k-file",n.wrapper).not(".k-file-success, .k-file-error, .k-file-invalid"),i=e(".k-file-invalid",n.wrapper);(0===s.length||i.length>0)&&(t=e(".k-file.k-file-error, .k-file.k-file-invalid",n.wrapper),o=e(".k-upload-status-total",n.wrapper),a=e(".k-icon",o).removeClass().addClass("k-icon").addClass(0!==t.length?Z.warning:Z.success),o.html(a).append(n.localization.headerStatusUploaded))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var a,n=this,o=n.element;t!==this._module.onAbort&&this._module.onAbort(),o.value||(a=e(o),a.attr("disabled","disabled"),window.setTimeout(function(){a.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(U.support.browser.opera||U.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),a=!t&&/safari/.test(e),n=a&&/windows/.test(e);return!n&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,a,n=this;e(".k-upload-button",n.wrapper).wrap("<div class='k-dropzone'></div>"),t=n._ns,a=e(".k-dropzone",n.wrapper).append(e("<em>"+n.localization.dropFilesHere+"</em>")).on("dragenter"+t,k).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(n._onDrop,n)),_(a,t,function(){a.closest(".k-upload").hasClass("k-state-disabled")||a.addClass("k-dropzone-hovered")},function(){a.removeClass("k-dropzone-hovered")}),n._bindDocumentDragEventWrappers(a)},_setupCustomDropZone:function(){var t,a=this,n=e(a.options.dropZone);e(".k-upload-button",a.wrapper).wrap("<div class='k-dropzone'></div>"),t=a._ns,n.on("dragenter"+t,k).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(a._onDrop,a)),_(n,t,function(t){a.wrapper.hasClass("k-state-disabled")||(n.removeClass("k-dropzone-hovered"),e(t.target).addClass("k-dropzone-hovered"))},function(){n.removeClass("k-dropzone-hovered")}),a._bindDocumentDragEventWrappers(n)},_bindDocumentDragEventWrappers:function(t){var a=this,n=a._ns;_(e(document),n,function(){a.wrapper.hasClass("k-state-disabled")||(t.addClass("k-dropzone-active"),t.closest(".k-upload").removeClass("k-upload-empty"))},function(){t.removeClass("k-dropzone-active"),0===e("li.k-file",t.closest(".k-upload")).length&&t.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,a,n,o){var s=this,i=s.options.async.removeField||"fileNames",r=e.extend(a.data,E());r[i]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:g,url:this.options.async.removeUrl,traditional:!0,data:r,headers:a.headers,success:n,error:o,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(e){var t=this,a=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button' aria-label='"+this.localization.select+"'></div></div>"),a.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(I)},_inputFiles:function(e){return n(e)}}),W=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};W.prototype={onSelect:function(t,n){var o,s,i=this.upload,r=e(t.target),l=i._filesContainValidationErrors(n);i._addInput(r),o={fileNames:n},l?r.remove():o.relatedInput=r,s=i._enqueueFile(a(r),o),l&&i._hideUploadProgress(s),i._fileAction(s,B)},onRemove:function(e){var t=F(e),a=t.data("relatedInput");a&&a.remove(),this.upload._removeFileEntry(t)}},y=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},j._frameId=0,y.prototype={onSelect:function(t,a){var n=this.upload,o=e(t.target),s=n._filesContainValidationErrors(a),i=this.prepareUpload(o,a,s);n.options.async.autoUpload?s?(n._fileAction(i,B),n._showHeaderUploadStatus(!1)):this.performUpload(i):(n._fileAction(i,B),s?n._updateHeaderUploadStatus():n._showUploadButton()),s&&n._hideUploadProgress(i)},prepareUpload:function(t,n,o){var s,i,r,l,p=this.upload,d=e(p.element),u=p.options.async.saveField||t.attr("name");return p._addInput(t),t.attr("name",u),o?(t.remove(),i={fileNames:n}):(r=this.createFrame(p.name+"_"+j._frameId++),this.registerFrame(r),l=this.createForm(p.options.async.saveUrl,r.attr("name")).append(d),i={frame:r,relatedInput:d,fileNames:n}),s=p._enqueueFile(a(t),i),r&&r.data({form:l,file:s}),s},performUpload:function(t){var a,n,o,s={files:t.data("fileNames")},i=t.data("frame"),r=this.upload;if(r.trigger(A,s))r._removeFileEntry(i.data("file")),this.cleanupFrame(i),this.unregisterFrame(i);else{r._hideUploadButton(),r._showHeaderUploadStatus(!0),i.appendTo(document.body),a=i.data("form").attr("action",r.options.async.saveUrl).appendTo(document.body),s.data=e.extend({},s.data,E());for(n in s.data)o=a.find("input[name='"+n+"']"),0===o.length&&(o=e("<input>",{type:"hidden",name:n}).prependTo(a)),o.val(s.data[n]);r._fileAction(t,T),r._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),i.one("load",e.proxy(this.onIframeLoad,this)),a[0].submit()}},onSaveSelected:function(){var t=this,a=t.upload;e(".k-file",this.element).each(function(){var n=e(this),o=w(n),s=a._filesContainValidationErrors(n.data("fileNames"));o||s||t.performUpload(n)})},onIframeLoad:function(t){var a,n=e(t.target);try{a=n.contents().text()}catch(o){a="Error trying to get server response: "+o}this.processResponse(n,a)},processResponse:function(t,a){var n=t.data("file"),o=this,s={responseText:a};v(a,function(a){e.extend(s,{statusText:"OK",status:"200"}),o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},a,s),o.cleanupFrame(t),o.unregisterFrame(t)},function(){e.extend(s,{statusText:"error",status:"500"}),o.upload._onUploadError({target:e(n,o.upload.wrapper)},s)})},onCancel:function(t){var a=e(t.target).data("frame");this.stopFrameSubmit(a),this.cleanupFrame(a),this.unregisterFrame(a),this.upload._removeFileEntry(a.data("file"))},onRetry:function(e){var t=F(e);this.performUpload(t)},onRemove:function(e,t,a){var n=this,o=n.upload,s=F(e),i=s.data("frame");i?(n.unregisterFrame(i),o._removeFileEntry(s),n.cleanupFrame(i)):s.hasClass("k-file-success")?h(s,o,t,a):o._removeFileEntry(s)},onAbort:function(){var t=this.element,a=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),a.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,a){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+a+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},C=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},C.prototype={onSelect:function(t,a){var n,o=this.upload,s=this,i=e(t.target),r=this.prepareUpload(i,a);e.each(r,function(){n=o._filesContainValidationErrors(e(this.data("fileNames"))),o.options.async.autoUpload?n?(o._fileAction(this,B),o._showHeaderUploadStatus(!1)):s.performUpload(this):(o._fileAction(this,B),n?o._updateHeaderUploadStatus():o._showUploadButton()),n&&o._hideUploadProgress(this)})},prepareUpload:function(t,a){var n=this.enqueueFiles(a);return t.is("input")&&(e.each(n,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",n),this.upload._addInput(t)),n},enqueueFiles:function(t){var a,n,o,s,i=this.upload,r=t.length,l=[];if(i.options.async.batch===!0)a=e.map(t,function(e){return e.name}).join(", "),s=i._enqueueFile(a,{fileNames:t}),s.data("files",t),l.push(s);else for(n=0;n<r;n++)o=t[n],a=o.name,s=i._enqueueFile(a,{fileNames:[o]}),s.data("files",[o]),l.push(s);return l},performUpload:function(t){var a,n=this.upload,o=this.createFormData(),s=this.createXHR(),i={files:t.data("fileNames"),XMLHttpRequest:s};if(n.trigger(A,i))this.removeFileEntry(t);else{if(n._fileAction(t,T),n._hideUploadButton(),n._showHeaderUploadStatus(!0),i.formData)o=i.formData;else{i.data=e.extend({},i.data,E());for(a in i.data)o.append(a,i.data[a]);this.populateFormData(o,t.data("files"))}n._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(n.options.async.saveUrl,o,t,s)}},onSaveSelected:function(){var t=this,a=t.upload;e(".k-file",this.element).each(function(){var n=e(this),o=w(n),s=a._filesContainValidationErrors(n.data("fileNames"));o||s||t.performUpload(n)})},onCancel:function(e){var t=F(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=F(e);this.performUpload(t)},onRemove:function(e,t,a){var n=this,o=n.upload,s=F(e);s.hasClass("k-file-success")?h(s,o,t,a):n.removeFileEntry(s)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,a,n){var o,s=this;a.data("request",n),n.addEventListener("load",function(e){s.onRequestSuccess.call(s,e,a)},!1),n.addEventListener(N,function(e){s.onRequestError.call(s,e,a)},!1),n.upload.addEventListener("progress",function(e){s.onRequestProgress.call(s,e,a)},!1),n.open("POST",e,!0),n.withCredentials=this.upload.options.async.withCredentials,o=this.upload.options.async.accept,o&&n.setRequestHeader("Accept",o),n.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var a,n=this.upload,o=t.length;for(a=0;a<o;a++)e.append(n.options.async.saveField||n.name,t[a].rawFile);return e},onRequestSuccess:function(t,a){function n(){s.upload._onUploadError({target:e(a,s.upload.wrapper)},o)}var o=t.target,s=this;o.status>=200&&o.status<=299?v(o.responseText,function(t){s.upload._onFileProgress({target:e(a,s.upload.wrapper)},100),s.upload._onUploadSuccess({target:e(a,s.upload.wrapper)},t,o),s.cleanupFileEntry(a)},n):n()},onRequestError:function(t,a){var n=t.target;this.upload._onUploadError({target:e(a,this.upload.wrapper)},n)},cleanupFileEntry:function(t){var a=t.data("relatedInput"),n=!0;a&&(e.each(a.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(n=n&&this.hasClass("k-file-success"))}),n&&a.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,a){var n=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(a,this.upload.wrapper)},n)},stopUploadRequest:function(e){e.data("request").abort()}},U.ui.plugin(j)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()});
//# sourceMappingURL=kendo.upload.min.js.map
